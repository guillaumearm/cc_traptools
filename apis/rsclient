local SERVER_COMMAND_CHANNEL = 140;
local OUTPUT_RESPONSE_FEEDBACK_CHANNEL = 141;
local INPUT_RESPONSE_FEEDBACK_CHANNEL = 142;

-- example:
-- rsclient.write(colors.red + colors.blue, true)
function write(color, colorstate)
  if type(color) ~= "number" then
    error("librsclient error: invalid color (number expected)")
  end

  if type(colorstate) ~= "boolean" then
    error("librsclient error: invalid colorstate (boolean expected)")
  end

  local type;
  if colorstate then
    type = "on"
  else
    type = "off"
  end

  net.send(SERVER_COMMAND_CHANNEL, OUTPUT_RESPONSE_FEEDBACK_CHANNEL, {
    type = type,
    payload = color
  })
end

function reset()
  net.send(SERVER_COMMAND_CHANNEL, OUTPUT_RESPONSE_FEEDBACK_CHANNEL, {
    type = 'reset'
  });
end

function readInputState()
  return net.request(SERVER_COMMAND_CHANNEL, INPUT_RESPONSE_FEEDBACK_CHANNEL, {
    type = "getstate_input"
  })
end

function readOutputState()
  return net.request(SERVER_COMMAND_CHANNEL, OUTPUT_RESPONSE_FEEDBACK_CHANNEL, {
    type = "getstate"
  })
end
